# Availability and Restrictions

The partner will send through updates for availability and restrictions using the **OTA\_HotelAvailNotifRQ**. The Channel Manager will process the updates and respond with the **OTA\_HotelAvailNotifRS** as a receipt of success or failure to process the request.

## OTA\_HotelAvailNotifRQ

An OTA\_HotelAvailNotifRQ message will be pushed the channel mananger's web service after the value changes in The Partner's extranet. The message can be used to update the availability and restrictions for one room type for a single hotel. Specifically:

* Room availability
* Stop sell or 'close out' of a room / rate plan.
* Closed to arrival
* Closed to departure
* Minimum stays
* Maximum stays

Each OTA\_HotelAvailNotifRQ message contains a single **AvailStatusMessages** element which indicates the hotel to update using the AvailStatusMessages/@HotelCode attribute. The AvailStatusMessages/AvailStatusMessage elements will contain the updates to process over a date range. There can be several AvailStatusMessage updates per request, however each request will be limited to one hotel and one room.

### The Request

```
<OTA_HotelAvailNotifRQ
	xmlns="http://www.opentravel.org/OTA/2003/05" Version="1.0"
	TimeStamp="2022-04-08T14:22:30+07:00"
	EchoToken="c4ef4553-6575-440c-80c8-2be5a7092727">
	<AvailStatusMessages HotelCode="000001">
		<AvailStatusMessage BookingLimit="10">
			<StatusApplicationControl Start="2022-04-08"
				End="2022-12-31" InvTypeCode="PdncX" RatePlanCode="MNOPQ" />
			<RestrictionStatus Status="Open" />
		</AvailStatusMessage>
	</AvailStatusMessages>
</OTA_HotelAvailNotifRQ>
```

### Elements & Attributes&#x20;

The OTA\_HotelAvailNotifRQ message has the following elements and attributes:

| Element / @Attribute                                                                                                                                                        | Occurrences | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| OTA\_HotelAvailNotifRQ                                                                                                                                                      |             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| OTA\_HotelAvailNotifRQ / @xmns                                                                                                                                              |             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| OTA\_HotelAvailNotifRQ / @EchoToken                                                                                                                                         |             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| OTA\_HotelAvailNotifRQ / @Version                                                                                                                                           |             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| OTA\_HotelAvailNotifRQ / @TimeStamp                                                                                                                                         |             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages                                                                                                                                | 0..1        | Contains the availability messages.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / @HotelCode                                                                                                                   | 1           | This is the code of the property whose availability is being updated.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage                                                                                                           | 1..n        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / @BookingLimit                                                                                           | 0..1        | Sets the number of rooms available for sale per day. Room availability is always set at the room level regardless of the value of the @RatePlanCode attribute.                                                                                                                                                                                                                                                                                                                                                                                                 |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / StatusApplicationControl                                                                                | 1           | Contains date and room identification information.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / StatusApplicationControl / @Start , @End                                                                | 1           | The start and end dates for which the availability update is being sent in ISO 8601 format (without time). These dates are inclusive and use the hotel time-zone.                                                                                                                                                                                                                                                                                                                                                                                              |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / StatusApplicationControl / @InvTypeCode                                                                 | 1           | Identifies the room.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / StatusApplicationControl / @RatePlanCode                                                                | 1           | Identifies the rate plan.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <p>OTA_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / StatusApplicationControl / @Mon, @Tue, @Weds,</p><p>        @Thur, @Fri, @Sat,</p><p>        @Sun</p> | 0..1        | Used to communicate which days of the week the update applies to. If one is set, they must all be set. Valid values:’ “0” – Does not apply “1” – Applies.                                                                                                                                                                                                                                                                                                                                                                                                      |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / LengthsOfStay                                                                                           | 0..1        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / LengthsOfStay / @ArrivalDateBased                                                                       | 0..1        | If a booking takes place on this day a minimum or maximum stay (for the whole booking or arrival based, depending on ArrivalDateBased="0" or ArrivalDateBased="1") of this amount of days is required. If no value is given, "0" will be assumed.                                                                                                                                                                                                                                                                                                              |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / LengthsOfStay / LengthOfStay                                                                            | 1..2        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / LengthsOfStay / LengthOfStay / @MinMaxMessageType                                                       | 1           | The type of length of stay restriction set. Valid values: “SetMinLOS”, “RemoveMinLOS” – Sets, removes the minimum length of stay. “SetMaxLOS”, “RemoveMaxLOS” – Sets, removes the maximum length of stay.                                                                                                                                                                                                                                                                                                                                                      |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / LengthsOfStay / LengthOfStay / @Time                                                                    | 1           | The number of days for the length of stay restriction. This attribute is required when setting the restriction and must not be set when removing it.                                                                                                                                                                                                                                                                                                                                                                                                           |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / RestrictionStatus                                                                                       | 0..1        | The rate’s open/close restrictions.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / RestrictionStatus / @Status                                                                             | 1           | Status of the restriction. Valid values “Close” – Specifies a Close restriction. The room is closed for sales and cannot be sold. “Open” – Specifies an Open restriction. The room is Open for sale. This removes a previous Close restriction.                                                                                                                                                                                                                                                                                                                |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / RestrictionStatus / @Restriction                                                                        | 0..1        | Specifies the type of restriction. Valid values are: “Arrival” – Closed or opened for arrival at this date. A room closed for arrival cannot be sold if the guest arrives during the dates the restriction applies. “Departure” – Closed or opened for departure. A room closed for departure cannot be sold if the guest departs during the dates the restriction applies. “Master” – Fully closed or opened for sale. If a room is fully closed it cannot be sold if the guest stays at any of the dates the restriction applies. This is the default value. |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / RestrictionStatus / @MinAdvancedBookingOffset                                                           | 0..1        | <p></p><p>Minimum duration before the arrival date (in the property's local time) for which this room rate can be booked.</p><p>Valid value types are:</p><ul><li><strong>Integer:</strong> The number of days before the arrival date. For example, a value of <code>1</code> indicates the room rate must be booked at least one day before the arrival date. A value of <code>0</code> (the default value) indicates no restriction on the latest booking time.</li></ul>                                                                                   |
| OTA\_HotelAvailNotifRQ / AvailStatusMessages / AvailStatusMessage / RestrictionStatus / @MaxAdvancedBookingOffset                                                           | 0..1        | <p></p><p>Maximum duration before the arrival date (in the property's local time) for which this room rate can be booked.</p><p>Valid value types are:</p><ul><li><strong>Integer:</strong> The number of days before the arrival date. For example, a value of <code>30</code> indicates the room rate cannot be booked earlier than 30 days before the arrival date. A value of <code>0</code> (the default value) indicates no restriction on the earliest booking time.</li></ul>                                                                          |

### Successful Response

```
<?xml version="1.0" encoding="UTF-8"?>
<OTA_HotelAvailNotifRS
	xmlns="http://www.opentravel.org/OTA/2003/05" Version="1.0"
	TimeStamp="2022-04-08T15:18:49+07:00"
	EchoToken="c4ef4553-6575-440c-80c8-2be5a7092727">
	<Success />
</OTA_HotelAvailNotifRS>
```

### Failure Response

```
<?xml version="1.0" encoding="UTF-8"?>
<OTA_HotelAvailNotifRS
	xmlns="http://www.opentravel.org/OTA/2003/05" Version="1.0"
	TimeStamp="2022-04-08T14:34:25+07:00"
	EchoToken="c4ef4553-6575-440c-80c8-2be5a7092727">
	<Errors>
		<Error Type="6" Code="392">Hotel Identifier ABC Not Found.</Error>
	</Errors>
</OTA_HotelAvailNotifRS>
```

### Elements & Attributes

The OTA\_HotelAvailNotifRS message has the following elements and attributes:

| Element / @Attribute                      | Occurrences | Description |
| ----------------------------------------- | ----------- | ----------- |
| OTA\_HotelAvailNotifRS                    | 1           |             |
| OTA\_HotelAvailNotifRS/@xmlns             | 1           |             |
| OTA\_HotelAvailNotifRS/@Version           | 1           |             |
| OTA\_HotelAvailNotifRS/@TimeStamp         | 1           |             |
| OTA\_HotelAvailNotifRS/@EchoToken         | 1           |             |
| OTA\_HotelAvailNotifRS/Success            | 0..1        |             |
| OTA\_HotelAvailNotifRS/Errors             | 0..1        |             |
| OTA\_HotelAvailNotifRS/Errors/Error       | 1           |             |
| OTA\_HotelAvailNotifRS/Errors/Error/@Type | 1           |             |
| OTA\_HotelAvailNotifRS/Errors/Error/@Code | 1           |             |
|                                           |             |             |

